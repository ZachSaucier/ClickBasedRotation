function dRotate(t,e){var r=e.dataset,n=r.rotType||"realistic",s=r.rotAmount||15,a=e.clientWidth,o=e.clientHeight,i=document.body.scrollLeft||document.documentElement.scrollLeft,m=document.body.scrollTop||document.documentElement.scrollTop,d=t.clientX-e.getBoundingClientRect().left+i,l=t.clientY-e.getBoundingClientRect().top+m,f=a/2,c=o/2;if(console.log(t.clientX+" "+e.offsetLeft+" "+i+" "+a+" "+o),"realistic"==n){var p=f-d,u=c-l,y=f+c,g=Math.abs(p)+Math.abs(u),O="translateZ("+-(y-g)/8+"px) rotateY("+-p/8*s/15+"deg) rotateX("+u/4*s/15+"deg)";trans(e,O)}else if("simple"==n){var T=Math.max(a,o),E=r.rotOrigin||"center center";f+a/8>=d&&d>=f-a/8&&c+o/8>=l&&l>=c-o/8?rotate(e,"c"):o/2>=l?a/2>=d?d>=l?(rotate(e,"t"),"opposite"==E&&transO(e,"bottom center")):(rotate(e,"l"),"opposite"==E&&transO(e,"right center")):T>=d+l?(rotate(e,"t"),"opposite"==E&&transO(e,"bottom center")):(rotate(e,"r"),"opposite"==E&&transO(e,"left center")):a/2>=d?T>=d+l?(rotate(e,"l"),"opposite"==E&&transO(e,"right center")):(rotate(e,"b"),"opposite"==E&&transO(e,"top center")):d-a/2>=l-o/2?(rotate(e,"r"),"opposite"==E&&transO(e,"left center")):(rotate(e,"b"),"opposite"==E&&transO(e,"top center"))}}function rotate(t,e){var r=t.dataset.rotAmount||15;"c"==e?trans(t,"translateZ(-"+r+"px)"):"t"==e?trans(t,"rotateX("+r+"deg)"):"r"==e?trans(t,"rotateY("+r+"deg)"):"b"==e?trans(t,"rotateX(-"+r+"deg)"):"l"==e&&trans(t,"rotateY(-"+r+"deg)")}function trans(t,e){""==t.style.MozTransform&&""==t.style.transform||""==t.style.msTransform&&""==t.style.transform||""==t.style.OTransform&&""==t.style.transform?(t.parentNode.style.perspective=(t.getAttribute("data-rot-perspective")||400)+"px",t.style.MozTransform=e,t.style.msTransform=e,t.style.OTransform=e,t.style.transform=e):(t.style.MozTransform=e,t.style.msTransform=e,t.style.OTransform=e,t.style.transform=e),e="perspective("+(t.getAttribute("data-rot-perspective")||400)+") "+e,t.style.webkitTransform=e,t.style.MozTransform=e,t.style.msTransform=e,t.style.OTransform=e,t.style.transform=e}function transO(t,e){t.style.webkitTransformOrigin=e,t.style.MozTransformOrigin=e,t.style.msTransformOrigin=e,t.style.OTransformOrigin=e,t.style.transformOrigin=e}for(var drs=document.getElementsByClassName("rot-dir"),isAnimating=!1,animElem=drs[0],i=0;i<drs.length;i++){var dataSet=drs[i].dataset,duration=dataSet.rotDur||.1,ease=dataSet.rotEase||"ease-out",transOrigin=dataSet.rotOrigin||"center center";drs[i].dataset.rotInit=drs[i].dataset.rotInit||"rotate(0deg)",trans(drs[i],drs[i].dataset.rotInit),drs[i].style.webkitTransition="-webkit-transform "+duration+"s "+ease,drs[i].style.MozTransition="-moz-transform "+duration+"s "+ease,drs[i].style.msTransition="-ms-transform "+duration+"s "+ease,drs[i].style.OTransition="-o-transform "+duration+"s "+ease,drs[i].style.transition="transform "+duration+"s "+ease,drs[i].style.outline="1px solid transparent",transO(drs[i],transOrigin),drs[i].onmousedown=drs[i].ontouchstart=function(e){isAnimating||(isAnimating=!0,"undefined"!=typeof this.dataset.rotStart&&eval(this.dataset.rotStart+"()"),dRotate(e,this),animElem=this)}}document.body.onmouseup=document.body.ontouchend=function(){trans(animElem,animElem.dataset.rotInit),isAnimating=!1,"undefined"!=typeof animElem.dataset.rotEnd&&eval(animElem.dataset.rotEnd+"()")},window.onmousemove=function(e){var mX=e.pageX,mY=e.pageY;mY>=0&&mY<=window.innerHeight&&mX>=0&&mX<=window.innerWidth||(trans(animElem,animElem.dataset.rotInit),isAnimating=!1,"undefined"!=typeof animElem.dataset.rotEnd&&eval(animElem.dataset.rotEnd+"()"))};