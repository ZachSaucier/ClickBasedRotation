function dRotate(e,t){var n=t.dataset,r=n.rotType||"realistic",i=n.rotAmount||15,s=t.clientWidth,o=t.clientHeight,u=parseInt(document.body.scrollLeft===0?document.documentElement.scrollLeft:document.body.scrollLeft),a=parseInt(document.body.scrollTop===0?document.documentElement.scrollTop:document.body.scrollTop),f=e.clientX-t.offsetLeft+u,l=e.clientY-t.offsetTop+a,c=s/2,h=o/2;if(r=="realistic"){var p=c-f,d=h-l,v=c+h,m=Math.abs(p)+Math.abs(d),g="translateZ("+ -(v-m)/8+"px) rotateY("+ -p/8*i/15+"deg) rotateX("+d/4*i/15+"deg)";trans(t,g)}else if(r=="simple"){var y=Math.max(s,o),b=n.rotOrigin||"center center";if(f<=c+s/8&&f>=c-s/8&&l<=h+o/8&&l>=h-o/8){rotate(t,"c")}else if(l<=o/2){if(f<=s/2){if(f>=l){rotate(t,"t");if(b=="opposite"){transO(t,"bottom center")}}else{rotate(t,"l");if(b=="opposite"){transO(t,"right center")}}}else{if(f+l<=y){rotate(t,"t");if(b=="opposite"){transO(t,"bottom center")}}else{rotate(t,"r");if(b=="opposite"){transO(t,"left center")}}}}else{if(f<=s/2){if(f+l<=y){rotate(t,"l");if(b=="opposite"){transO(t,"right center")}}else{rotate(t,"b");if(b=="opposite"){transO(t,"top center")}}}else{if(f-s/2>=l-o/2){rotate(t,"r");if(b=="opposite"){transO(t,"left center")}}else{rotate(t,"b");if(b=="opposite"){transO(t,"top center")}}}}}}function rotate(e,t){var n=e.dataset.rotAmount||15;if(t=="c"){trans(e,"translateZ(-"+n+"px)")}else if(t=="t"){trans(e,"rotateX("+n+"deg)")}else if(t=="r"){trans(e,"rotateY("+n+"deg)")}else if(t=="b"){trans(e,"rotateX(-"+n+"deg)")}else if(t=="l"){trans(e,"rotateY(-"+n+"deg)")}}function trans(e,t){if(e.style.MozTransform==""&&e.style.transform==""||e.style.msTransform==""&&e.style.transform==""||e.style.OTransform==""&&e.style.transform==""){e.parentNode.style.perspective=(e.getAttribute("data-rot-perspective")||400)+"px";e.style.MozTransform=t;e.style.msTransform=t;e.style.OTransform=t;e.style.transform=t}else{e.style.MozTransform=t;e.style.msTransform=t;e.style.OTransform=t;e.style.transform=t}t="perspective("+(e.getAttribute("data-rot-perspective")||400)+") "+t;e.style.webkitTransform=t;e.style.MozTransform=t;e.style.msTransform=t;e.style.OTransform=t;e.style.transform=t}function transO(e,t){e.style.webkitTransformOrigin=t;e.style.MozTransformOrigin=t;e.style.msTransformOrigin=t;e.style.OTransformOrigin=t;e.style.transformOrigin=t}var drs=document.getElementsByClassName("rot-dir"),isAnimating=false,animElem;for(var i=0;i<drs.length;i++){var dataSet=drs[i].dataset,duration=dataSet.rotDur||.1,ease=dataSet.rotEase||"ease-out",transOrigin=dataSet.rotOrigin||"center center";drs[i].dataset.rotInit=drs[i].dataset.rotInit||"rotate(0deg)";trans(drs[i],drs[i].dataset.rotInit);drs[i].style.webkitTransition="-webkit-transform "+duration+"s "+ease;drs[i].style.MozTransition="-moz-transform "+duration+"s "+ease;drs[i].style.msTransition="-ms-transform "+duration+"s "+ease;drs[i].style.OTransition="-o-transform "+duration+"s "+ease;drs[i].style.transition="transform "+duration+"s "+ease;drs[i].style.outline="1px solid transparent";transO(drs[i],transOrigin);drs[i].onmousedown=function(e){if(!isAnimating){isAnimating=true;dRotate(e,this);animElem=this}}}document.body.onmouseup=function(){trans(animElem,animElem.dataset.rotInit);isAnimating=false}