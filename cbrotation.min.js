function dRotate(t,e){var r=e.dataset,a=r.rotType||"realistic",s=e.clientWidth,n=e.clientHeight,i=t.clientX-e.offsetLeft,o=t.clientY-e.offsetTop,p=s/2,d=n/2;if("realistic"==a){var m,c=p-i,l=d-o,f=p+d,g=Math.abs(c)+Math.abs(l);m=0>l&&0>c||l>=0&&c>=0?"translateZ("+-(f-g)/8+"px) rotateY("+-c/8+"deg) rotateX("+l/4+"deg)":"translateZ("+-(f-g)/8+"px) rotateY("+-c/8+"deg) rotateX("+l/4+"deg)",trans(e,m)}else if("simple"==a){var u=Math.max(s,n),O=r.rotOrigin||"center center";p+s/8>=i&&i>=p-s/8&&d+n/8>=o&&o>=d-n/8?rotate(e,"c"):n/2>=o?s/2>=i?i>=o?(rotate(e,"t"),"opposite"==O&&transO(e,"bottom center")):(rotate(e,"l"),"opposite"==O&&transO(e,"right center")):u>=i+o?(rotate(e,"t"),"opposite"==O&&transO(e,"bottom center")):(rotate(e,"r"),"opposite"==O&&transO(e,"left center")):s/2>=i?u>=i+o?(rotate(e,"l"),"opposite"==O&&transO(e,"right center")):(rotate(e,"b"),"opposite"==O&&transO(e,"top center")):i-s/2>=o-n/2?(rotate(e,"r"),"opposite"==O&&transO(e,"left center")):(rotate(e,"b"),"opposite"==O&&transO(e,"top center"))}}function rotate(t,e){var r=t.dataset.rotAmount||15;"c"==e?trans(t,"translateZ(-"+r+"px)"):"t"==e?trans(t,"rotateX("+r+"deg)"):"r"==e?trans(t,"rotateY("+r+"deg)"):"b"==e?trans(t,"rotateX(-"+r+"deg)"):"l"==e&&trans(t,"rotateY(-"+r+"deg)")}function trans(t,e){t.style.webkitTransform="perspective("+(t.getAttribute("data-rot-perspective")||400)+") "+e,t.style.MozTransformTransform="perspective("+(t.getAttribute("data-rot-perspective")||400)+") "+e,t.style.msTransform="perspective("+(t.getAttribute("data-rot-perspective")||400)+") "+e,t.style.OTransform="perspective("+(t.getAttribute("data-rot-perspective")||400)+") "+e,t.style.transform="perspective("+(t.getAttribute("data-rot-perspective")||400)+") "+e}function transO(t,e){t.style.webkitTransformOrigin=e,t.style.MozTransformTransformOrigin=e,t.style.msTransformOrigin=e,t.style.OTransformOrigin=e,t.style.transformOrigin=e}for(var drs=document.getElementsByClassName("rot-dir"),isAnimating=!1,animElem,i=0;i<drs.length;i++){var dataSet=drs[i].dataset,duration=dataSet.rotDur||.1,ease=dataSet.rotEase||"ease-out",transOrigin=dataSet.rotOrigin||"center center";drs[i].style.webkitTransition="-webkit-transform "+duration+"s "+ease,drs[i].style.MozTransition="-moz-transform "+duration+"s "+ease,drs[i].style.msTransition="-ms-transform "+duration+"s "+ease,drs[i].style.OTransition="-o-transform "+duration+"s "+ease,drs[i].style.transition="transform "+duration+"s "+ease,transO(drs[i],transOrigin),drs[i].onmousedown=function(t){isAnimating||(isAnimating=!0,dRotate(t,this),animElem=this)}}document.body.onmouseup=function(){trans(animElem,"rotate(0)"),isAnimating=!1};