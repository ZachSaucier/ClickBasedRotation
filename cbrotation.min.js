function dRotate(e,t){var n=t.dataset,r=n.rotType||"realistic",i=n.rotAmount||15,s=t.clientWidth,o=t.clientHeight,u=e.clientX-t.getBoundingClientRect().left,a=e.clientY-t.getBoundingClientRect().top,f=s/2,l=o/2;if(r=="realistic"){var c=f-u,h=l-a,p=f+l,d=Math.abs(c)+Math.abs(h),v="translateZ("+ -(p-d)/8+"px) rotateY("+ -c/8*i/15+"deg) rotateX("+h/4*i/15+"deg)";trans(t,v)}else if(r=="simple"){var m=Math.max(s,o),g=n.rotOrigin||"center center";if(u<=f+s/8&&u>=f-s/8&&a<=l+o/8&&a>=l-o/8){rotate(t,"c")}else if(a<=o/2){if(u<=s/2){if(u>=a){if(g=="opposite"){transO(t,"bottom center")}rotate(t,"t")}else{if(g=="opposite"){transO(t,"right center")}rotate(t,"l")}}else{if(u+a<=m){if(g=="opposite"){transO(t,"bottom center")}rotate(t,"t")}else{if(g=="opposite"){transO(t,"left center")}rotate(t,"r")}}}else{if(u<=s/2){if(u+a<=m){if(g=="opposite"){transO(t,"right center")}rotate(t,"l")}else{if(g=="opposite"){transO(t,"top center")}rotate(t,"b")}}else{if(u-s/2>=a-o/2){if(g=="opposite"){transO(t,"left center")}rotate(t,"r")}else{if(g=="opposite"){transO(t,"top center")}rotate(t,"b")}}}}}function rotate(e,t){var n=e.dataset.rotAmount||15;if(t=="c"){trans(e,"translateZ(-"+n+"px)")}else if(t=="t"){trans(e,"rotateX("+n+"deg)")}else if(t=="r"){trans(e,"rotateY("+n+"deg)")}else if(t=="b"){trans(e,"rotateX(-"+n+"deg)")}else if(t=="l"){trans(e,"rotateY(-"+n+"deg)")}}function trans(e,t){if(e.style.MozTransform==""&&e.style.transform==""||e.style.msTransform==""&&e.style.transform==""||e.style.OTransform==""&&e.style.transform==""){e.parentNode.style.perspective=(e.getAttribute("data-rot-perspective")||400)+"px";e.style.MozTransform=t;e.style.msTransform=t;e.style.OTransform=t;e.style.transform=t}else{e.style.MozTransform=t;e.style.msTransform=t;e.style.OTransform=t;e.style.transform=t}t="perspective("+(e.getAttribute("data-rot-perspective")||400)+") "+t;e.style.webkitTransform=t;e.style.MozTransform=t;e.style.msTransform=t;e.style.OTransform=t;e.style.transform=t}function transO(e,t){e.style.webkitTransformOrigin=t;e.style.MozTransformOrigin=t;e.style.msTransformOrigin=t;e.style.OTransformOrigin=t;e.style.transformOrigin=t}var drs=document.getElementsByClassName("rot-dir"),isAnimating=false,animElem=drs[0];for(var i=0;i<drs.length;i++){var dataSet=drs[i].dataset,duration=dataSet.rotDur||.1,ease=dataSet.rotEase||"ease-out",transOrigin=dataSet.rotOrigin||"center center";drs[i].dataset.rotInit=drs[i].dataset.rotInit||"rotate(0deg)";trans(drs[i],drs[i].dataset.rotInit);drs[i].style.webkitTransition="-webkit-transform "+duration+"s "+ease;drs[i].style.MozTransition="-moz-transform "+duration+"s "+ease;drs[i].style.msTransition="-ms-transform "+duration+"s "+ease;drs[i].style.OTransition="-o-transform "+duration+"s "+ease;drs[i].style.transition="transform "+duration+"s "+ease;drs[i].style.outline="1px solid transparent";transO(drs[i],transOrigin);drs[i].onmousedown=drs[i].ontouchstart=function(e){if(!isAnimating){isAnimating=true;if(typeof this.dataset.rotStart!=="undefined")eval(this.dataset.rotStart+"()");dRotate(e,this);animElem=this}}}document.body.onmouseup=document.body.ontouchend=function(){trans(animElem,animElem.dataset.rotInit);isAnimating=false;if(typeof animElem.dataset.rotEnd!=="undefined")eval(animElem.dataset.rotEnd+"()")};window.onmousemove=function(e){var mX=e.pageX,mY=e.pageY;if(mY>=0&&mY<=window.innerHeight&&mX>=0&&mX<=window.innerWidth)return;trans(animElem,animElem.dataset.rotInit);isAnimating=false;if(typeof animElem.dataset.rotEnd!=="undefined")eval(animElem.dataset.rotEnd+"()")}